pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
left,right,up,down,fire1,fire2=0,1,2,3,4,5
black,dark_blue,dark_purple,dark_green,brown,dark_gray,light_gray,white,red,orange,yellow,green,blue,indigo,pink,peach=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15

s,wc=1,8      -- sprite no, wake count
cx,cy=0,0     -- camera-x, camera-y
x,y=59,59
mx=512        -- max-x
flipx=false
speed=2

function _init()
  
end

function _update()
  s=16
  speed = btn(fire1) and 3 or 2
  if (btn(left)) then
    x=x<1 and 0 or x-speed
    flipx=true
    wc = wc<1 and 8 or wc-1
    s = wc<4 and 18 or 20
  end
  if (btn(right)) then
    x=x>mx-17 and mx-16 or x+speed
    flipx=false
    wc = wc<1 and 8 or wc-1
    s = wc<4 and 18 or 20
  end
  if (x-cx>93) then cx=(x>mx-20-16) and mx-128 or x-93 end
  if (x-cx<20) then cx=(x<20) and 0 or x-20 end
end

function _draw()
  cls()
  
  camera(cx,cy)
  line(cx,0,cx,128,dark_gray)
  line(mx-1,0,mx-1,128,red)
  rect(cx+20,cy+20,cx+108,cy+108,dark_gray)
  print("("..cx..","..cy.."):"..(x-cx),cx,0,white)
  print("wc:"..wc..",s:"..s..",sp:"..speed,cx,8,white)
  
  print("("..x..","..y..")",x-12,y-8,white)
  spr(s,x,y,2,2,flipx)
end
__gfx__
00000000004444400044444000444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004ffff0004ffff0004ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700004f0f00004f0f00004f0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000004ffff0004ffff0004ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000008888000888880000888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700008888000088888008888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000cccc0000cccc0000cccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c00c000c00c00000c000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000888880000000000088888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008888888880000000888888888000000008888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000333ff3f000000000333ff3f00000000088888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000
0003f3fff3fff0000003f3fff3fff0000000333ff3f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0003f33fff3fff000003f33fff3fff000003f3fff3fff00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00033ffff333300000033ffff33330000003f33fff3fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000fffffff000000000fffffff000000033ffff333300000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000338333000000003333883300000000000fffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0003338338333000ff3333888333fff000003333830f000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0033338888333300fff0338888833ff0000f333333fff00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00ff38a88a83ff00ff00888a8880030000ff833333ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00fff888888fff000008888888883300003388888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00ff88888888ff000088888888883300003888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008880088800000338880008883300033888088800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00033300003330000333000000000000030000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00333300003333000033300000000000000000333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000
